name: 'LLM PR Generator'
description: 'A GitHub Action that generates pull requests using LLMs'
author: 'WillBooster Inc.'

# Define the outputs for your action
outputs:
  pr-description:
    description: 'The generated PR description'
    value: ${{ steps.generator.outputs.pr-description }}

# Define the runs configuration
runs:
  using: 'composite'
  steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 'lts/*'

    - name: Print Node.js version
      shell: bash
      run: |
        echo "Node.js version:"
        node --version
        npm --version

    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.13.3'

    - name: Print Python version
      shell: bash
      run: |
        echo "Python version:"
        python --version
        pip --version

    - name: Generate PR description
      id: generator
      shell: bash
      run: |
        chmod +x ${{ github.action_path }}/generate-pr.sh
        ${{ github.action_path }}/generate-pr.sh

# Add branding to make your action stand out in the marketplace
branding:
  icon: 'git-pull-request'
  color: 'blue'
